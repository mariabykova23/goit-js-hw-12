{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/x-icon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export class imgPix {\n  constructor() {\n    this.BASE_URL = 'https://pixabay.com';\n    this.END_POINT = '/api/';\n    this.API_KEY = '?key=42433869-1e5be4b754d1019adc877ba0e';\n  }\n\n  getImage(keyWord,currentPage) {\n    const url = this.BASE_URL + this.END_POINT + this.API_KEY + `&q=${keyWord}&page=${currentPage}`;\n\n    const options = {\n      method: 'GET',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page:currentPage,\n    };\n    \n\n    return fetch(url, options).then(res => res.json());\n  }\n}\n","export default \"__VITE_ASSET__35698fd4__\"","'user strict';\n\nconst containerForImages = document.querySelector('.container-imgs');\n\nfunction imgCreate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  const container = `<div class=\"gallery\">\n    <div class=\"container-img-wrap\">\n      <a href=\"${largeImageURL}\" class=\"img-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" />\n        </a>\n    </div>\n    <table border=\"0\" class=\"image-descrip\">\n      <tr class=\"td-descrip\">\n        <td>Likes</td>\n        <td>Views</td>\n        <td>Comments</td>\n        <td>Downloads</td>\n      </tr>\n      <tr class=\"td-result\">\n        <td>${likes}</td>\n        <td>${views}</td>\n        <td>${comments}</td>\n        <td>${downloads}</td>\n      </tr>\n    </table>\n  </div>`;\n\n  return container;\n}\n\nfunction imgsCreate(images) {\n  return images.map(imgCreate).join('');\n}\n\nexport function renderImages(images) {\n  const markup = imgsCreate(images);\n  containerForImages.insertAdjacentHTML('beforeend', markup);\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { imgPix } from './js/pixabay-api';\n\nimport icon from './img/x-icon.svg';\n\nimport { renderImages } from './js/render-functions';\n\nconst searchForm = document.querySelector('.form');\nconst containerForImages = document.querySelector('.container-imgs');\nconst loadDiv = document.querySelector('.hidden-load');\nconst loadMorePictures = document.querySelector('.load-morepics');\nconst userKeyWordInput = document.querySelector('.data-userInput');\n\nconst imgSearch = new imgPix();\n\nlet page = 1;\nlet maxPages;\n\nsearchForm.addEventListener('submit', ev => {\n  ev.preventDefault();\n  clearGallery();\n  const userKeyWord = userKeyWordInput.value.trim();\n  page = 1;\n  onSubmit(userKeyWord);\n});\n\nloadMorePictures.addEventListener('click', e => {\n  e.preventDefault();\n  const userKeyWord = userKeyWordInput.value.trim();\n  loadMore(userKeyWord);\n  noMorePages();\n});\n\nfunction loadMore(userKeyWord) {\n  let newPage = page + 1;\n\n  imgSearch\n    .getImage(userKeyWord, newPage)\n    .then(data => {\n      let maxPages = Math.ceil(data.totalHits / 20);\n      if (newPage <= maxPages) {\n        loadMorePictures.classList.add('load-morepics-on');\n        renderImages(data.hits);\n        lightBoxShow();\n        return;\n      } else {\n        loadMorePictures.classList.remove('load-morepics-on');\n        noMorePages(newPage, maxPages);\n      }\n    })\n    .catch(error => {\n      console.error('Error loading images:', error);\n    });\n  page++;\n}\n\nfunction onSubmit(userKeyWord) {\n  loadDiv.classList.add('loader');\n\n  imgSearch\n    .getImage(userKeyWord, page)\n    .then(data => {\n      if (data.totalHits > 0) {\n        const img = data.hits;\n        renderImages(img);\n        lightBoxShow();\n        loadMorePictures.classList.add('load-morepics-on');\n      } else {\n        iziToast.show({\n          position: 'topRight',\n          iconUrl: icon,\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#FFFFFF',\n          messageSize: '16',\n          messageLineHeight: '15',\n          backgroundColor: '#EF4040',\n          timeout: 5000,\n          displayMode: 2,\n          close: true,\n          closeOnEscape: true,\n          closeOnClick: true,\n        });\n      }\n    })\n    .catch(err => {\n      iziToast.error({\n        position: 'topRight',\n        iconUrl: icon,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FFFFFF',\n        messageSize: '16',\n        messageLineHeight: '15',\n        backgroundColor: '#EF4040',\n        timeout: 5000,\n        displayMode: 2,\n        close: true,\n        closeOnEscape: true,\n        closeOnClick: true,\n      });\n    })\n    .finally(() => {\n      loadDiv.classList.remove('loader');\n    });\n}\n\nfunction lightBoxShow() {\n  const lightbox = new SimpleLightbox('.container-img-wrap a', {\n    close: true,\n    captionsData: 'alt',\n    captionDelay: 50,\n    captionsPosition: 'bottom',\n    animationSpeed: 1,\n    captionSelector: 'img',\n    loop: true,\n  });\n\n  lightbox.on('show.simplelightbox');\n  lightbox.refresh();\n}\n\nfunction noMorePages(newPage, maxPages) {\n  if (newPage > maxPages) {\n    iziToast.show({\n      position: 'topRight',\n      message: 'Sorry, there are no images to load!',\n      messageColor: 'black',\n      messageSize: '16',\n      messageLineHeight: '15',\n      backgroundColor: 'yellow',\n      timeout: 5000,\n      displayMode: 2,\n      close: true,\n      closeOnEscape: true,\n      closeOnClick: true,\n    });\n  }\n}\n\nfunction clearGallery() {\n  containerForImages.innerHTML = '';\n  loadMorePictures.classList.remove('load-morepics-on');\n}\n"],"names":["imgPix","keyWord","currentPage","url","res","icon","containerForImages","imgCreate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imgsCreate","images","renderImages","markup","searchForm","loadDiv","loadMorePictures","userKeyWordInput","imgSearch","page","ev","clearGallery","userKeyWord","onSubmit","e","loadMore","noMorePages","newPage","data","maxPages","lightBoxShow","error","img","iziToast","err","lightbox","SimpleLightbox"],"mappings":"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"}