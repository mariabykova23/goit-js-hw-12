{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/x-icon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'user strict';\n\nimport axios from 'axios';\n\nexport async function imgPix(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/?key=';\n  const API_KEY = '42433869-1e5be4b754d1019adc877ba0e';\n\n  const url = `${BASE_URL}${END_POINT}${API_KEY}`;\n\n  const options = {\n    method: 'GET',\n    params: {\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: '15',\n      page: currentPage,\n      q: query,\n    },\n  };\n\n  const res = await axios.get(url, options);\n  return res.data;\n}\n","export default \"__VITE_ASSET__35698fd4__\"","'user strict';\n\nconst containerForImages = document.querySelector('.container-imgs');\n\nfunction imgCreate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  const container = `<div class=\"gallery\">\n    <div class=\"container-img-wrap\">\n      <a href=\"${largeImageURL}\" class=\"img-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" />\n        </a>\n    </div>\n    <table border=\"0\" class=\"image-descrip\">\n      <tr class=\"td-descrip\">\n        <td>Likes</td>\n        <td>Views</td>\n        <td>Comments</td>\n        <td>Downloads</td>\n      </tr>\n      <tr class=\"td-result\">\n        <td>${likes}</td>\n        <td>${views}</td>\n        <td>${comments}</td>\n        <td>${downloads}</td>\n      </tr>\n    </table>\n  </div>`;\n\n  return container;\n}\n\nfunction imgsCreate(images) {\n  return images.map(imgCreate).join('');\n}\n\nexport function renderImages(images) {\n  const markup = imgsCreate(images);\n  containerForImages.insertAdjacentHTML('beforeend', markup);\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { imgPix } from './js/pixabay-api';\n\nimport icon from './img/x-icon.svg';\n\nimport { renderImages } from './js/render-functions';\n\nconst refs = {\n  searchForm: document.querySelector('.form'),\n  loadDiv: document.querySelector('.loader'),\n  loadMorePictures: document.querySelector('.load-morepics'),\n  userKeyWordInput: document.querySelector('.data-userInput'),\n  containerForImages: document.querySelector('.container-imgs'),\n};\n\nconst lightbox = new SimpleLightbox('.container-img-wrap a', {\n  close: true,\n  captionsData: 'alt',\n  captionDelay: 50,\n  captionsPosition: 'bottom',\n  animationSpeed: 1,\n  captionSelector: 'img',\n  loop: true,\n});\n\nlet page;\nlet maxPages;\nlet userKeyWord;\n\nrefs.searchForm.addEventListener('submit', onSubmit);\n\nrefs.loadMorePictures.addEventListener('click', loadMore);\n\nasync function onSubmit(e) {\n  e.preventDefault();\n  userKeyWord = refs.userKeyWordInput.value.trim();\n  page = 1;\n  showLoader();\n  if (!userKeyWord) {\n    maxPages = 0;\n    checkLoadBtnVisibility();\n    hideLoader();\n    refs.containerForImages.innerHTML = '';\n    showError('Empty field!', 'green', 'black', false);\n    return;\n  }\n  try {\n    const data = await imgPix(userKeyWord, page);\n    if (data.totalHits === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'red',\n        'white',\n        icon\n      );\n    }\n    const img = data.hits;\n    maxPages = Math.ceil(data.totalHits / 20);\n    refs.containerForImages.innerHTML = '';\n    renderImages(img);\n    lightbox.refresh();\n  } catch (error) {\n    showError(error);\n    maxPages = 0;\n    refs.containerForImages.innerHTML = '';\n  } finally {\n    checkLoadBtnVisibility();\n  }\n\n  hideLoader();\n  e.target.reset();\n}\n\nasync function loadMore() {\n  page += 1;\n  showLoader();\n  const data = await imgPix(userKeyWord, page);\n  renderImages(data.hits);\n  lightbox.refresh();\n  hideLoader();\n  checkLoadBtnVisibility();\n  if (page === maxPages) {\n    showError(\n      'We are sorry, but you have reached the end of search results.',\n      'lightblue',\n      'white',\n      false\n    );\n  }\n\n  const height =\n    refs.containerForImages.firstElementChild.getBoundingClientRect().height;\n\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 3,\n  });\n}\n\nfunction showLoadBtn() {\n  refs.loadMorePictures.classList.remove('hidden');\n}\n\nfunction removeLoadBtn() {\n  refs.loadMorePictures.classList.add('hidden');\n}\n\nfunction checkLoadBtnVisibility() {\n  if (page >= maxPages) {\n    removeLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showLoader() {\n  refs.loadDiv.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loadDiv.classList.add('hidden');\n}\n\nfunction showError(text, bgColor, txtColor, iconX) {\n  iziToast.error({\n    position: 'topRight',\n    iconUrl: iconX,\n    message: text,\n    messageColor: txtColor,\n    messageSize: '16',\n    messageLineHeight: '15',\n    backgroundColor: bgColor,\n    timeout: 5000,\n    displayMode: 2,\n    close: true,\n    closeOnEscape: true,\n    closeOnClick: true,\n  });\n}\n"],"names":["imgPix","query","currentPage","url","options","axios","icon","containerForImages","imgCreate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imgsCreate","images","renderImages","markup","refs","lightbox","SimpleLightbox","page","maxPages","userKeyWord","onSubmit","loadMore","e","showLoader","checkLoadBtnVisibility","hideLoader","showError","data","img","error","height","showLoadBtn","removeLoadBtn","text","bgColor","txtColor","iconX","iziToast"],"mappings":"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"}